# 卡片导出用户指南

---

## 简介

薯片编辑器提供了强大的卡片导出功能，可以将您创建的卡片转换为多种格式，方便分享、打印和展示。

---

## 导出格式

### 1. 卡片文件 (.card)

**适用场景**:
- 完整保存卡片，包含所有内容和资源
- 分享给其他薯片用户
- 备份卡片数据
- 上传到薯片社区

**特点**:
- 标准格式，所有薯片软件都支持
- 包含完整的卡片结构和元数据
- 可以选择是否包含资源文件
- 支持三种资源模式：全填充、半空壳、空壳

**使用方法**:
1. 打开卡片设置对话框
2. 切换到"导出"选项卡
3. 点击"导出为 .card 文件"
4. 选择保存位置
5. 等待导出完成

---

### 2. HTML 网页

**适用场景**:
- 在浏览器中查看卡片
- 发布到网站
- 离线浏览
- 生成静态网页

**特点**:
- 可以在任何浏览器中打开
- 完整还原卡片的视觉效果
- 支持主题和样式
- 可以包含所有资源文件

**输出结构**:
```
my-card/
├── index.html          # 主入口文件
├── cards/              # 基础卡片 HTML
│   ├── card1.html
│   └── card2.html
├── assets/             # 资源文件
│   ├── images/
│   ├── videos/
│   └── ...
└── theme.css           # 主题样式
```

**使用方法**:
1. 在导出选项卡中点击"导出为网页"
2. 选择输出目录
3. 配置选项：
   - 是否包含资源文件
   - 资源处理策略
   - 主题选择
4. 等待导出完成
5. 用浏览器打开 `index.html` 查看

---

### 3. PDF 文档

**适用场景**:
- 打印卡片
- 正式文档存档
- 电子书制作
- 分享到不支持 HTML 的平台

**特点**:
- 通用的文档格式
- 适合打印
- 支持自定义页面大小和边距
- 可以添加页眉页脚

**配置选项**:
- **页面格式**: A4、A5、Letter 等
- **页面方向**: 纵向或横向
- **页边距**: 自定义上下左右边距
- **打印背景**: 是否包含背景图形

**使用方法**:
1. 在导出选项卡中点击"导出为 PDF"
2. 选择输出文件路径
3. 配置页面格式和方向
4. 等待导出完成

---

### 4. 图片

**适用场景**:
- 社交媒体分享
- 截图展示
- 插入到其他文档
- 制作缩略图

**特点**:
- 支持 PNG 和 JPG 格式
- 可以选择分辨率
- PNG 支持透明背景
- 适合快速分享

**配置选项**:
- **图片格式**: PNG（无损）或 JPG（有损）
- **质量**: 1-100（仅 JPG）
- **缩放比例**: 1x、2x、3x 高清
- **尺寸**: 自定义宽度和高度
- **透明背景**: 是否使用透明背景（仅 PNG）

**使用方法**:
1. 在导出选项卡中点击"导出为图片"
2. 选择输出文件路径
3. 选择格式和质量
4. 等待导出完成

---

## 导出流程

### 步骤1: 打开卡片设置

在卡片窗口的菜单栏中，点击"设置"按钮（齿轮图标）。

### 步骤2: 切换到导出选项卡

在卡片设置对话框中，点击"导出"选项卡。

### 步骤3: 选择导出格式

点击想要导出的格式按钮：
- 📦 卡片文件
- 🌐 网页
- 📄 文档
- 🖼️ 图片

### 步骤4: 配置导出选项

根据选择的格式，配置相应的选项。

### 步骤5: 指定输出路径

在"输出路径"输入框中输入或选择保存位置。

### 步骤6: 开始导出

点击导出按钮，系统会显示进度条和当前步骤。

### 步骤7: 完成

导出完成后，系统会显示成功消息和文件保存位置。

---

## 导出选项详解

### 通用选项

**输出路径**:
- 可以使用绝对路径或相对路径
- 系统会自动创建不存在的目录
- 如果文件已存在，会自动添加编号

**主题**:
- 可以选择使用特定主题
- 留空则使用卡片自己的主题设置

### .card 格式选项

**包含资源**:
- 开启：所有资源打包到 .card 文件中（全填充模式）
- 关闭：只打包配置，不包含资源（空壳模式）

**压缩**:
- 建议关闭（使用存储模式，访问更快）
- 开启后文件会稍微小一些，但访问速度会变慢

### HTML 格式选项

**包含资源文件**:
- 开启：复制所有图片、视频等资源到输出目录
- 关闭：只生成 HTML 文件，资源保持引用

**资源处理策略**:
- **复制所有**: 复制所有资源（包括网络资源）
- **只复制本地**: 只复制本地资源，网络资源保持 URL 引用
- **嵌入**: 将资源转换为 Base64 嵌入 HTML（文件会变大）
- **只引用**: 不复制资源，保持原路径引用

### PDF 格式选项

**页面格式**:
- A4: 210 × 297 mm（最常用）
- A5: 148 × 210 mm（小尺寸）
- Letter: 8.5 × 11 inch（美国标准）

**页面方向**:
- 纵向：适合一般文档
- 横向：适合宽内容

**页边距**:
- 可以分别设置上、下、左、右边距
- 单位支持：mm（毫米）、cm（厘米）、in（英寸）

### 图片格式选项

**PNG vs JPG**:
- PNG: 无损压缩，文件较大，支持透明背景
- JPG: 有损压缩，文件较小，不支持透明

**缩放比例**:
- 1x: 标准分辨率
- 2x: 高清（Retina）
- 3x: 超高清

**质量**（仅 JPG）:
- 100: 最高质量，文件最大
- 90: 高质量（推荐）
- 70: 中等质量，文件较小
- 50: 低质量，文件很小

---

## 进度监控

导出过程中，系统会显示：
- 进度条（百分比）
- 当前步骤（"正在解析"、"正在渲染"等）
- 预估剩余时间（部分格式）

典型的导出步骤：
1. **准备**: 验证输入数据
2. **解析**: 解析卡片结构
3. **渲染**: 渲染基础卡片
4. **处理**: 处理主题和资源
5. **生成**: 生成输出文件
6. **写入**: 保存到磁盘
7. **完成**: 导出成功

---

## 常见问题

### Q: 导出需要多长时间？

A: 取决于卡片大小和格式：
- .card 文件: 通常 5-30 秒
- HTML 网页: 通常 10-60 秒
- PDF 文档: 通常 20-120 秒（需要渲染）
- 图片: 通常 15-90 秒（需要渲染）

包含大量资源的卡片会需要更长时间。

### Q: 导出的文件在哪里？

A: 默认保存在工作区的 `exports/` 目录下。可以在设置中修改默认导出位置。

### Q: 可以同时导出多张卡片吗？

A: 可以。系统支持并发导出，最多同时进行 3 个导出任务。

### Q: 导出失败了怎么办？

A: 检查以下几点：
1. 输出路径是否有效且有写入权限
2. 磁盘空间是否充足
3. 卡片结构是否完整
4. 查看详细的错误信息和日志

可以尝试：
- 重新导出
- 更换输出路径
- 减小卡片大小
- 检查系统日志

### Q: 如何导出包含嵌套卡片的复合卡片？

A: 系统会自动处理嵌套关系：
- .card 格式：嵌套的卡片会作为独立文件包含
- HTML 格式：嵌套卡片会被正确渲染
- PDF/图片：嵌套卡片会被展开渲染

### Q: 导出的 HTML 可以编辑吗？

A: 导出的 HTML 是静态网页，可以用编辑器打开修改。但建议：
- 在薯片编辑器中编辑原卡片
- 重新导出获取更新的 HTML
- 这样可以保持卡片的完整性

### Q: PDF 导出的分辨率如何设置？

A: PDF 是矢量格式，不需要设置分辨率。打印质量取决于：
- 卡片中使用的图片分辨率
- 打印机的 DPI 设置

### Q: 图片导出是否支持自定义尺寸？

A: 是的，可以指定：
- 固定宽度（高度自适应）
- 固定高度（宽度自适应）
- 固定宽度和高度（可能裁剪）
- 留空则自适应卡片内容

---

## 高级技巧

### 批量导出脚本

```javascript
// 使用 SDK 编写批量导出脚本
const sdk = new ChipsSDK();
await sdk.initialize();

const cardIds = ['card1', 'card2', 'card3'];

for (const cardId of cardIds) {
  await sdk.card.export(cardId, 'pdf', {
    outputPath: `/exports/${cardId}.pdf`,
    pageFormat: 'a4',
  });
  console.log(`已导出: ${cardId}`);
}
```

### 自定义主题导出

```javascript
// 为导出指定特殊主题
await sdk.card.export(cardId, 'html', {
  outputPath: '/exports/dark-theme-card',
  themeId: '自定义:深色主题',
});
```

### 高清图片导出

```javascript
// 导出 2x Retina 高清图片
await sdk.card.export(cardId, 'image', {
  outputPath: '/exports/card-hires.png',
  format: 'png',
  scale: 2,
  width: 1920,
});
```

---

## 故障排除

### 导出卡在某个步骤

**可能原因**:
- 网络资源无法访问
- 某个资源文件过大
- 系统内存不足

**解决方法**:
1. 取消当前导出
2. 检查卡片中的网络资源是否可访问
3. 尝试使用"半空壳"模式导出
4. 关闭其他占用内存的程序

### 导出的 PDF 显示不完整

**可能原因**:
- 卡片内容过长
- 某些动态内容未加载完成

**解决方法**:
1. 检查原卡片在编辑器中是否正常显示
2. 尝试调整页面格式（使用更大的纸张）
3. 等待更长时间让内容加载完成

### 导出的图片质量不佳

**可能原因**:
- 缩放比例设置过低
- JPG 质量设置过低
- 卡片中的图片本身分辨率低

**解决方法**:
1. 使用 PNG 格式（无损）
2. 增加缩放比例（2x 或 3x）
3. 替换卡片中的低分辨率图片

---

## 相关文档

- [API 文档](./API文档.md) - 开发者 API 参考
- [架构设计](./架构设计.md) - 技术架构说明
- [卡片文件格式规范](../../生态共用/02-卡片文件格式规范.md) - .card 格式详解

---

**文档版本**: 1.0.0  
**最后更新**: 2026-02-04
