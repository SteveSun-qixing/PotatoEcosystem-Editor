# Phase11 - æ’¤é”€é‡åšç³»ç»Ÿ

**å‘¨æœŸ**: 1 å‘¨  
**ä¼˜å…ˆçº§**: ğŸŸ¢ ä¸­  
**ä¾èµ–**: Phase6  
**çŠ¶æ€**: å¾…å¼€å‘

---

## 1. é˜¶æ®µç›®æ ‡

å®ç°ç¼–è¾‘å™¨çš„æ’¤é”€é‡åšç³»ç»Ÿï¼š
- å‘½ä»¤æ¨¡å¼å®ç°
- æ“ä½œå†å²æ ˆ
- å¿«æ·é”®æ”¯æŒï¼ˆCtrl/Cmd+Z, Ctrl/Cmd+Shift+Zï¼‰
- å†å²è®°å½•é™åˆ¶

---

## 2. ä»»åŠ¡åˆ—è¡¨

### 2.1 åˆ›å»ºå‘½ä»¤ç®¡ç†å™¨

**ä»»åŠ¡ ID**: P11-T01  
**ä¼˜å…ˆçº§**: ğŸ”´ æœ€é«˜  
**é¢„è®¡å·¥æ—¶**: 4h

**åŠŸèƒ½è¯´æ˜**:
- å‘½ä»¤æ¥å£å®šä¹‰
- å‘½ä»¤æ‰§è¡Œ
- æ’¤é”€/é‡åšæ ˆ
- å†å²è®°å½•é™åˆ¶

**æ ¸å¿ƒä»£ç ç»“æ„**:
```typescript
// src/core/command-manager.ts
interface Command {
  execute(): Promise<void>;
  undo(): Promise<void>;
  redo(): Promise<void>;
  description?: string;
}

export class CommandManager {
  private undoStack: Command[] = [];
  private redoStack: Command[] = [];
  private maxHistory = 100;

  async execute(command: Command): Promise<void>;
  async undo(): Promise<void>;
  async redo(): Promise<void>;
  canUndo(): boolean;
  canRedo(): boolean;
  getHistory(): CommandHistory[];
}
```

**éªŒæ”¶æ ‡å‡†**:
- [ ] å‘½ä»¤ç®¡ç†æ­£å¸¸
- [ ] æ’¤é”€/é‡åšæ­£å¸¸
- [ ] å†å²é™åˆ¶æ­£å¸¸

---

### 2.2 å®ç°å¡ç‰‡æ“ä½œå‘½ä»¤

**ä»»åŠ¡ ID**: P11-T02  
**ä¼˜å…ˆçº§**: ğŸ”´ æœ€é«˜  
**é¢„è®¡å·¥æ—¶**: 3h

**åŠŸèƒ½è¯´æ˜**:
- AddBaseCardCommand
- RemoveBaseCardCommand
- MoveBaseCardCommand
- UpdateConfigCommand

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ‰€æœ‰å¡ç‰‡å‘½ä»¤å®ç°
- [ ] æ’¤é”€/é‡åšæ­£å¸¸

---

### 2.3 å®ç°çª—å£æ“ä½œå‘½ä»¤

**ä»»åŠ¡ ID**: P11-T03  
**ä¼˜å…ˆçº§**: ğŸŸ¡ é«˜  
**é¢„è®¡å·¥æ—¶**: 2h

**åŠŸèƒ½è¯´æ˜**:
- CreateWindowCommand
- CloseWindowCommand
- MoveWindowCommand
- ResizeWindowCommand

**éªŒæ”¶æ ‡å‡†**:
- [ ] æ‰€æœ‰çª—å£å‘½ä»¤å®ç°
- [ ] æ’¤é”€/é‡åšæ­£å¸¸

---

### 2.4 å®ç°å¿«æ·é”®ç»‘å®š

**ä»»åŠ¡ ID**: P11-T04  
**ä¼˜å…ˆçº§**: ğŸŸ¡ é«˜  
**é¢„è®¡å·¥æ—¶**: 1h

**åŠŸèƒ½è¯´æ˜**:
- Ctrl/Cmd+Z æ’¤é”€
- Ctrl/Cmd+Shift+Z é‡åš
- çŠ¶æ€åé¦ˆï¼ˆèœå•é¡¹ç¦ç”¨çŠ¶æ€ï¼‰

**éªŒæ”¶æ ‡å‡†**:
- [ ] å¿«æ·é”®æ­£å¸¸
- [ ] çŠ¶æ€åé¦ˆæ­£ç¡®

---

### 2.5 å®ç°å†å²é¢æ¿ï¼ˆå¯é€‰ï¼‰

**ä»»åŠ¡ ID**: P11-T05  
**ä¼˜å…ˆçº§**: ğŸŸ¢ ä¸­  
**é¢„è®¡å·¥æ—¶**: 2h

**åŠŸèƒ½è¯´æ˜**:
- æ˜¾ç¤ºæ“ä½œå†å²åˆ—è¡¨
- ç‚¹å‡»è·³è½¬åˆ°ç‰¹å®šçŠ¶æ€

**éªŒæ”¶æ ‡å‡†**:
- [ ] å†å²é¢æ¿æ˜¾ç¤ºæ­£å¸¸

---

### 2.6 ç¼–å†™å•å…ƒæµ‹è¯•

**ä»»åŠ¡ ID**: P11-T06  
**ä¼˜å…ˆçº§**: ğŸŸ¡ é«˜  
**é¢„è®¡å·¥æ—¶**: 2h

**éªŒæ”¶æ ‡å‡†**:
- [ ] æµ‹è¯•è¦†ç›–ç‡ >= 80%

---

### 2.7 æäº¤ä»£ç 

**ä»»åŠ¡ ID**: P11-T07  
**ä¼˜å…ˆçº§**: ğŸ”´ æœ€é«˜  
**é¢„è®¡å·¥æ—¶**: 0.5h

**éªŒæ”¶æ ‡å‡†**:
- [ ] ä»£ç æäº¤å®Œæˆ

---

## 3. å®Œæˆæ ‡å‡†

- [ ] CommandManager å®Œæˆ
- [ ] å¡ç‰‡æ“ä½œå‘½ä»¤å®Œæˆ
- [ ] çª—å£æ“ä½œå‘½ä»¤å®Œæˆ
- [ ] å¿«æ·é”®ç»‘å®šå®Œæˆ
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ >= 80%
- [ ] ä»£ç æäº¤å®Œæˆ

---

**ä»»åŠ¡åˆ†é…**: å­ä»£ç†-07  
**å¼€å§‹æ—¶é—´**: å¾…å®š  
**å®Œæˆæ—¶é—´**: å¾…å®š
